# Local å‘½ä»¤

`local` å‘½ä»¤æ˜¯åœ¨æœ¬åœ°å¯¹å‡½æ•°è°ƒè¯•çš„å‘½ä»¤ã€‚

- [Local å‘½ä»¤](#local-å‘½ä»¤)
  - [å‘½ä»¤è§£æ](#å‘½ä»¤è§£æ)
  - [local invoke å‘½ä»¤](#local-invoke-å‘½ä»¤)
    - [å‚æ•°è§£æ](#å‚æ•°è§£æ)
    - [æ“ä½œæ¡ˆä¾‹](#æ“ä½œæ¡ˆä¾‹)
  - [æ–­ç‚¹è°ƒè¯•](#æ–­ç‚¹è°ƒè¯•)
    - [VSCode](#vscode)
      - [è°ƒè¯• Event å‡½æ•°](#è°ƒè¯•-event-å‡½æ•°)
        - [step1ï¼šæ‰“å¼€ç»ˆç«¯ï¼Œè¿›å…¥ç›®æ ‡é¡¹ç›®ä¸‹ï¼Œè¾“å…¥å¯åŠ¨æŒ‡ä»¤](#step1æ‰“å¼€ç»ˆç«¯è¿›å…¥ç›®æ ‡é¡¹ç›®ä¸‹è¾“å…¥å¯åŠ¨æŒ‡ä»¤)
        - [step2ï¼šå¯åŠ¨æ–­ç‚¹è°ƒè¯•å™¨](#step2å¯åŠ¨æ–­ç‚¹è°ƒè¯•å™¨)
        - [æ–­ç‚¹è°ƒè¯•å®æ“è§†é¢‘](#æ–­ç‚¹è°ƒè¯•å®æ“è§†é¢‘)
  - [é™„å½•](#é™„å½•)
    - [é»˜è®¤æ–­ç‚¹è°ƒè¯•å‚æ•°](#é»˜è®¤æ–­ç‚¹è°ƒè¯•å‚æ•°)

## å‘½ä»¤è§£æ

å½“æ‰§è¡Œå‘½ä»¤`local -h`/`local --help`æ—¶ï¼Œå¯ä»¥è·å–å¸®åŠ©æ–‡æ¡£ã€‚

åœ¨è¯¥å‘½ä»¤ä¸­ï¼ŒåŒ…æ‹¬äº†ä¸¤ä¸ªä¸ªå­å‘½ä»¤ï¼š

- [invokeï¼šæœ¬åœ°è°ƒè¯•äº‹ä»¶å‡½æ•°](#local-invoke-å‘½ä»¤)

> æœªæ”¯æŒ**éwebserveræ¨¡å¼**

## local invoke å‘½ä»¤

`local invoke` å‘½ä»¤ï¼Œæ˜¯è¿›è¡Œæœ¬åœ°äº‹ä»¶å‡½æ•°è°ƒè¯•çš„å‘½ä»¤ã€‚

> ğŸ’¡ [äº‹ä»¶å‡½æ•°](https://support.huaweicloud.com/productdesc-functiongraph/functiongraph_02_1001.html)æŒ‡çš„æ˜¯é€šè¿‡è§¦å‘å™¨æ¥å‡ºå‘å‡½æ•°ã€‚

å½“æ‰§è¡Œå‘½ä»¤`local invoke -h`/`local invoke --help`æ—¶ï¼Œå¯ä»¥è·å–å¸®åŠ©æ–‡æ¡£ã€‚

### å‚æ•°è§£æ

| å‚æ•°å…¨ç§°      | å‚æ•°ç¼©å†™ | Yaml æ¨¡å¼ä¸‹å¿…å¡« | å‚æ•°å«ä¹‰|
| ------------- | -------- | --------------- | --------- |
| event-name    | n        | é€‰å¡«            | ä¼ å…¥ å‡½æ•°çš„ äº‹ä»¶æ•°æ®ï¼ŒåŒ…å« `APIG, CTS, DDS, DIS, LTS, OBS, SMN, TIMER`                   |
| event-file    | f        | é€‰å¡«            | ä»¥æ–‡ä»¶å½¢å¼ä¼ å…¥ `event` äº‹ä»¶æ•°æ®  |
| event-stdin   | s        | é€‰å¡«            | ä»¥æ ‡å‡†è¾“å…¥å½¢å¼ä¼ å…¥ `event` äº‹ä»¶æ•°æ® |
| mode          | m        | é€‰å¡«            | è°ƒè¯•æ¨¡å¼é€‰æ‹©ï¼ŒåŒ…æ‹¬ï¼š<br> - `normal`: é»˜è®¤æ¨¡å¼ï¼Œæœ¬åœ°å‡½æ•°è¿è¡Œå®¹å™¨åœ¨å‡½æ•°æ‰§è¡Œå®Œæˆåç«‹åˆ»é€€å‡º <br> - `api`: å¯åŠ¨æœåŠ¡ä¾›æœ¬åœ° InvokeFunction API æˆ–è€… SDK è¿›è¡Œè°ƒç”¨ |
| config        | c        | é€‰å¡«            | æŒ‡å®šæ–­ç‚¹è°ƒè¯•æ—¶ä½¿ç”¨çš„ IDEï¼Œå½“å‰åªæ”¯æŒ `vscode`, å–å€¼èŒƒå›´ï¼š`vscode`  |
| debug-port    | d        | é€‰å¡«            | æŒ‡å®šæ–­ç‚¹è°ƒè¯•ç«¯å£|
| server-port   | -        | é€‰å¡«            | è‡ªå®šä¹‰æœ¬åœ°ç›‘å¬ `server` çš„ç«¯å£     |

> å½“å‰å‘½ä»¤è¿˜æ”¯æŒéƒ¨åˆ†å…¨å±€å‚æ•°ï¼ˆä¾‹å¦‚`-a/--access`, `--debug`, `--help`ç­‰ï¼‰ï¼Œè¯¦æƒ…å¯å‚è€ƒ [Serverless Devs å…¨å±€å‚æ•°æ–‡æ¡£](https://github.com/Serverless-Devs/Serverless-Devs/blob/master/docs/zh/command/readme.md#%E5%85%A8%E5%B1%80%E5%8F%82%E6%95%B0)

## æ–­ç‚¹è°ƒè¯•

### VSCode

ä½¿ç”¨ VSCode è¿›è¡Œæ–­ç‚¹è°ƒè¯•æ—¶ï¼Œæµç¨‹ååˆ†ç®€å•ã€‚

#### è°ƒè¯• Event å‡½æ•°

##### step1ï¼šæ‰“å¼€ç»ˆç«¯ï¼Œè¿›å…¥ç›®æ ‡é¡¹ç›®ä¸‹ï¼Œè¾“å…¥å¯åŠ¨æŒ‡ä»¤

```
$ s local invoke --config vscode --debug-port 3000
```

å¯åŠ¨æŒ‡ä»¤æ‰§è¡Œåï¼Œæœ¬åœ°çš„å‡½æ•°è®¡ç®—æ‰§è¡Œå®¹å™¨ä¼šæœ‰ä¸€å®šé˜»å¡ï¼Œæˆ‘ä»¬éœ€è¦ç­‰å¾…è°ƒç”¨ï¼›ä¸æ­¤åŒæ—¶å½“å‰é¡¹ç›®ä¼šè‡ªåŠ¨ç”Ÿæˆ .vscode/launch.json æ–‡ä»¶ï¼Œè¯¥æ–‡ä»¶æ˜¯åŸºäº VSCode è¿›è¡Œè°ƒè¯•çš„é…ç½®æ–‡ä»¶ï¼Œè‹¥è¯¥æ–‡ä»¶å·²ç»å­˜åœ¨ï¼Œé‚£ä¹ˆå¯åŠ¨æŒ‡ä»¤ä¼šæ‰“å°ç›¸åº”é…ç½®æ–‡æœ¬ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œéœ€è¦åˆ©ç”¨è¿™éƒ¨åˆ†å†…å®¹è¦†ç›–å·²æœ‰ .vscode/launch.json ä¸­çš„å†…å®¹ã€‚
![](https://img.alicdn.com/imgextra/i3/O1CN01DcU4ca1VBiSYwrFh4_!!6000000002615-2-tps-1142-387.png)

##### step2ï¼šå¯åŠ¨æ–­ç‚¹è°ƒè¯•å™¨

æ‰“å¼€ VSCode ç•Œé¢ï¼Œç„¶åæ‰“å¼€ s.yml ä¸­ codeUri æ‰€å­˜æ”¾çš„æºä»£ç ï¼Œä¸ºå…¶æ‰“ä¸Šæ–­ç‚¹ï¼Œæ¥ç€ç‚¹å‡»å¼€å§‹è°ƒè¯•æŒ‰é’®ï¼Œå…·ä½“æ‰§è¡Œå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚
![](https://img.alicdn.com/imgextra/i3/O1CN01yycXnv1vzLO4cB9pv_!!6000000006243-2-tps-750-410.png)

å¯åŠ¨è°ƒè¯•å™¨åï¼Œç¨‹åºä¾¿å·²ç»å¯åŠ¨ï¼Œæ­¤æ—¶å°±å¯ä»¥å¼€å§‹è¿›è¡Œæˆ‘ä»¬çš„æ–­ç‚¹è°ƒè¯•å·¥ä½œäº†ã€‚

## é™„å½•

### é»˜è®¤æ–­ç‚¹è°ƒè¯•å‚æ•°

| **Runtime**       | **Default Debug Args**                                                                    |
| ----------------- | ----------------------------------------------------------------------------------------- |
| nodejs 8/10/12/14 | `--inspect-brk=0.0.0.0:${debugPort}`                                                      |
| python 2.7/3/3.9  | `-m ptvsd --host 0.0.0.0 --port ${debugPort} --wait`                                      |
| java 8            | `-agentlib:jdwp=transport=dt_socket,server=y,suspend=y,quiet=y,address=${debugPort}`      |
| java 11           | `-agentlib:jdwp=transport=dt_socket,server=y,suspend=y,quiet=y,address=*:${debugPort}`    |
| php7.2            | `remote_enable=1 remote_autostart=1 remote_port=${debugPort} remote_host=${ip.address()}` |