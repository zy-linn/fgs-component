# reserved å‘½ä»¤

`reserved` å‘½ä»¤æ˜¯è¿›è¡Œå‡½æ•°é¢„ç•™å®ä¾‹æ“ä½œçš„å‘½ä»¤ï¼Œä¸»è¦åŒ…å«é¢„ç•™å®ä¾‹çš„æŸ¥çœ‹ä¸æ›´æ–°

- [å‘½ä»¤è§£æ](#å‘½ä»¤è§£æ)
- [reserved get å‘½ä»¤](#reserved-get-å‘½ä»¤)
  - [å‚æ•°è§£æ](#å‚æ•°è§£æ)
  - [æ“ä½œæ¡ˆä¾‹](#æ“ä½œæ¡ˆä¾‹)
- [reserved put å‘½ä»¤](#reserved-put-å‘½ä»¤)
  - [å‚æ•°è§£æ](#å‚æ•°è§£æ-1)
  - [æ“ä½œæ¡ˆä¾‹](#æ“ä½œæ¡ˆä¾‹-1)

## å‘½ä»¤è§£æ

å½“æ‰§è¡Œå‘½ä»¤`reserved -h`/`reserved --help`æ—¶ï¼Œå¯ä»¥è·å–å¸®åŠ©æ–‡æ¡£ã€‚

åœ¨è¯¥å‘½ä»¤ä¸­ï¼ŒåŒ…æ‹¬äº†ä¸¤ä¸ªä¸ªå­å‘½ä»¤ï¼š
- [getï¼šè·å–å‡½æ•°é¢„ç•™å®ä¾‹](#reserved-get-å‘½ä»¤)
- [putï¼šé…ç½®é¢„ç•™å®ä¾‹ï¼ˆé…ç½®è§„åˆ™ï¼Œæ•°é‡ä¸º0ï¼Œè¡¨ç¤ºåˆ é™¤ï¼‰](#reserved-put-å‘½ä»¤)

## reserved get å‘½ä»¤

`reserved get` å‘½ä»¤ï¼Œæ˜¯è·å–å‡½æ•°é¢„ç•™å®ä¾‹çš„å‘½ä»¤ã€‚

å½“æ‰§è¡Œå‘½ä»¤`reserved get -h`/`reserved get --help`æ—¶ï¼Œå¯ä»¥è·å–å¸®åŠ©æ–‡æ¡£ã€‚

### å‚æ•°è§£æ

| å‚æ•°å…¨ç§°      | å‚æ•°ç¼©å†™ | Yamlæ¨¡å¼ä¸‹å¿…å¡« | Cliæ¨¡å¼ä¸‹å¿…å¡« | å‚æ•°å«ä¹‰                                                     |
| ------------ | -------- | -------------- | ------------- | ------------------------------------------------------------ |
| region       | -        | é€‰å¡«           | å¿…å¡«          | åœ°åŒº |
| function-name | -        | é€‰å¡«           | å¿…å¡«          | å‡½æ•°å   |
| qualifier-type   | -        | é€‰å¡«           | é€‰å¡«           | ç‰ˆæœ¬æˆ–åˆ«åç±»å‹ï¼Œå–å€¼`version, alias`ï¼Œä¸å¡«é»˜è®¤ä¸º `version`     |
| qualifier-name   | -        | é€‰å¡«           | é€‰å¡«           | ç‰ˆæœ¬æˆ–åˆ«ååç§°ï¼Œä¸å¡«é»˜è®¤ä½¿ç”¨ `latest`   |

>  âš ï¸ æ³¨æ„ï¼š å¦‚æœé…ç½®äº†`qualifier-type`ï¼Œæ²¡æœ‰é…ç½® `qualifier-name`ï¼Œé…ç½®çš„`qualifier-type`ä¸ç”Ÿæ•ˆï¼Œè·å– `latest` ä¸‹çš„é¢„ç•™å®ä¾‹

> å½“å‰å‘½ä»¤è¿˜æ”¯æŒéƒ¨åˆ†å…¨å±€å‚æ•°ï¼ˆä¾‹å¦‚`-a/--access`, `--debug`ç­‰ï¼‰ï¼Œè¯¦æƒ…å¯å‚è€ƒ [Serverless Devs å…¨å±€å‚æ•°æ–‡æ¡£](https://serverless-devs.com/serverless-devs/command/readme#å…¨å±€å‚æ•°)

### æ“ä½œæ¡ˆä¾‹

- **æœ‰èµ„æºæè¿°æ–‡ä»¶ï¼ˆYamlï¼‰æ—¶**ï¼Œå¯ä»¥ç›´æ¥æ‰§è¡Œ`s reserved get`è·å–å‡½æ•°çš„é¢„ç•™å®ä¾‹ï¼›
- **çº¯å‘½ä»¤è¡Œå½¢å¼ï¼ˆåœ¨æ²¡æœ‰èµ„æºæè¿° Yaml æ–‡ä»¶æ—¶ï¼‰**ï¼Œéœ€è¦æŒ‡å®šæœåŠ¡æ‰€åœ¨åœ°åŒºä»¥åŠæœåŠ¡åç§°ï¼Œä¾‹å¦‚`s cli fgs reserved get --region cn-north-4 --function-name fgs-test --qualifier-name v1`ï¼›

> âš ï¸ æ³¨æ„ï¼š    
> - æ‰§è¡Œ`cli` æ¨¡å¼æ—¶ï¼Œå¦‚æœå¯†é’¥ä¿¡æ¯ä¸æ˜¯`default`ï¼Œéœ€è¦æ·»åŠ  `access`å‚æ•°ï¼Œä¾‹å¦‚`s cli fgs reserved get --region cn-north-4 --function-name fgs-test --qualifier-name v1 --access xxxx`

ä¸Šè¿°å‘½ä»¤çš„æ‰§è¡Œç»“æœç¤ºä¾‹ï¼š

```text
- functionName:          fgs-test
  count:                 2
  idleMode:              true
  qualifierType:         version
  qualifierName:         latest
  scheduleConfig:
    - name:              schema-test
      count:             1
      cron:              0 */10 * * * ?
      expiredTime:         2024-01-31T00:00:00Z
      endTime:           2024-12-31T00:00:00Z
```

## reserved put å‘½ä»¤

`reserved put` å‘½ä»¤ï¼Œé…ç½®å‡½æ•°é¢„ç•™å®ä¾‹ã€‚

å½“æ‰§è¡Œå‘½ä»¤`reserved put -h`/`reserved put --help`æ—¶ï¼Œå¯ä»¥è·å–å¸®åŠ©æ–‡æ¡£ã€‚

### å‚æ•°è§£æ

| å‚æ•°å…¨ç§°     | å‚æ•°ç¼©å†™ | Yamlæ¨¡å¼ä¸‹å¿…å¡« | Cliæ¨¡å¼ä¸‹å¿…å¡« | å‚æ•°å«ä¹‰                                                     |
| ------------ | -------- | -------------- | ------------- | ------------------------------------------------------------ |
| region       | -        | é€‰å¡«           | å¿…å¡«          | åœ°åŒº |
| function-name | -        | é€‰å¡«           | å¿…å¡«          | å‡½æ•°å                                                       |
| qualifier-type   | -        | é€‰å¡«           | é€‰å¡«           | ç‰ˆæœ¬æˆ–åˆ«åç±»å‹ï¼Œå–å€¼`version, alias`ï¼Œä¸å¡«é»˜è®¤ä½¿ç”¨ç‰ˆæœ¬      |
| qualifier-name   | -        | é€‰å¡«           | é€‰å¡«           | ç‰ˆæœ¬æˆ–åˆ«ååç§°ï¼Œä¸å¡«é»˜è®¤ä½¿ç”¨ `latest`   |
| idle-mode   | -        | é€‰å¡«           | é€‰å¡«           | å¼€å¯é—²ç½®è®¡è´¹æ¨¡å¼ã€‚é»˜è®¤ä¸å¼€å¯   |
| count   | -        | é€‰å¡«           | é€‰å¡«           | é¢„ç•™å®ä¾‹æ•°é‡ã€‚å¤§äº0ï¼Œé…ç½®é¢„ç•™å®ä¾‹ï¼›ç­‰äº 0ï¼Œåˆ é™¤é¢„ç•™å®ä¾‹   |
| config   | -        | é€‰å¡«           | é€‰å¡«           | é¢„ç•™å®ä¾‹ç­–ç•¥é…ç½®çš„jsonæ–‡ä»¶åœ°å€ã€‚å½“å‰åªæ”¯æŒå®šæ—¶ç­–ç•¥   |

> å½“å‰å‘½ä»¤è¿˜æ”¯æŒéƒ¨åˆ†å…¨å±€å‚æ•°ï¼ˆä¾‹å¦‚`-a/--access`, `--debug`ç­‰ï¼‰ï¼Œè¯¦æƒ…å¯å‚è€ƒ [Serverless Devs å…¨å±€å‚æ•°æ–‡æ¡£](https://serverless-devs.com/serverless-devs/command/readme#å…¨å±€å‚æ•°)

### æ“ä½œæ¡ˆä¾‹

- **æœ‰èµ„æºæè¿°æ–‡ä»¶ï¼ˆYamlï¼‰æ—¶**ï¼Œå¯ä»¥ç›´æ¥æ‰§è¡Œ`s reserved put --qualifier-name v1 --count 3`ï¼›
- **çº¯å‘½ä»¤è¡Œå½¢å¼ï¼ˆåœ¨æ²¡æœ‰èµ„æºæè¿° Yaml æ–‡ä»¶æ—¶ï¼‰**ï¼Œéœ€è¦æŒ‡å®šæœåŠ¡æ‰€åœ¨åœ°åŒºä»¥åŠæœåŠ¡åç§°ï¼Œä¾‹å¦‚`s cli fgs reserved put --region cn-north-4 --function-name fgs-test --qualifier-name v1 --count 3`ï¼›

ä¸Šè¿°å‘½ä»¤çš„æ‰§è¡Œç»“æœç¤ºä¾‹ï¼š

```text
Reserved instances [fgs-test] updated.
```

> ğŸ’¡ åˆ é™¤é¢„ç•™ï¼šåˆ é™¤é¢„ç•™çš„æ–¹æ³•ï¼Œå¯ä»¥é€šè¿‡`s reserved put`å‘½ä»¤ï¼Œè¿›è¡Œåˆ é™¤ï¼Œåªéœ€è¦å°†`count`è°ƒæ•´ä¸º 0 å³å¯ã€‚ä¾‹å¦‚`s reserved put --qualifier-name fgs-test --count 0`

> å•çº¯é€šè¿‡`count`å‚æ•°è¿›è¡Œæ§åˆ¶çš„åªæ˜¯éå¸¸ç®€å•çš„é…ç½®ï¼Œé™¤æ­¤ä¹‹å¤–è¿˜æ”¯æŒå®šæ—¶ç­–ç•¥é…ç½®æ–¹æ³•ï¼Œæ­¤æ—¶å°±éœ€è¦å¯¹`--config`å‚æ•°è¿›è¡Œé…ç½®ï¼Œ`--config`å‚æ•°è¯†åˆ«çš„æ˜¯ä¸€ä¸ª JSON æ–‡ä»¶ï¼ŒåŸºç¡€æ ¼å¼å¦‚ä¸‹ï¼š

```json
{
  "scheduleConfig": [
    {
      "name": "scheduleName",
      "startTime": "2024-01-31T00:00:00Z",
      "expiredTime": "2024-12-31T00:00:00Z",
      "count": 10,
      "cron": "0 */10 * * * ?"
    },
    {
      "name": "scheduleName1",
      "startTime": "2024-06-31T00:00:00Z",
      "expiredTime": "2024-12-31T00:00:00Z",
      "count": 5,
      "cron": "0 */5 * * * ?"
    }
  ]
}
```
å…¶ä¸­ï¼Œ å®šæ—¶ç­–ç•¥ `scheduleConfig` å‚æ•°é…ç½®ï¼š
| å‚æ•°å    | ç±»å‹ | æ˜¯å¦å¿…å¡« | ç¤ºä¾‹ | å‚æ•°å«ä¹‰                                                     |
| ------------ | -------- | -------------- | ------------- | ------------------------------------------------------------ |
| name       | string       | å¿…å¡«          | scheduleName          | å®šæ—¶ç­–ç•¥å |
| startTime | string        | å¿…å¡«             | 2024-01-31T00:00:00Z          | å®šæ—¶ç­–ç•¥å¼€å§‹ç”Ÿæ•ˆæ—¶é—´    |
| expiredTime   | string       | å¿…å¡«           | 2024-12-31T00:00:00Z           | å®šæ—¶ç­–ç•¥å¤±æ•ˆæ—¶é—´      |
| count   | number     | é€‰å¡«         |  10          | é¢„ç•™å®ä¾‹æ•°é‡ã€‚å¤§äºç­‰äºå¤–å±‚çš„countå€¼ï¼Œ é»˜è®¤å–å¤–å±‚çš„countå€¼  |
| cron   | string       | å¿…å¡«           | 0 */10 * * * ?     | [cronè¡¨è¾¾å¼](https://support.huaweicloud.com/usermanual-functiongraph/functiongraph_01_0908.html)   |

å¦‚æœæŒ‡å®šå®šæ—¶é…ç½®ï¼Œæ‰§è¡Œå‘½ä»¤ `s reserved put --qualifier-name v1 --count 3 --config ./config.json`
